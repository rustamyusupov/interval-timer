(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const L="00:00",f=1e3,m=60,c={idle:"idle",add:"add",ready:"ready",countdown:"countdown",pause:"pause"},o={intervalId:null,current:{index:null,time:null},process:c.idle,timers:[]},g=(t,e)=>{t.timer.textContent=e.current.time?e.current.time:L},v=(t,e)=>(n,i)=>{const s=document.createElement("button"),r=document.createElement("span"),d=document.createElement("span"),a=document.createElement("li");s.classList.add("remove"),s.setAttribute("type","button"),s.textContent="âœ–",s.dataset.index=i,r.classList.add("text","name"),r.textContent=n.name,d.classList.add("text","time"),d.textContent=n.time,a.classList.add("item"),a.classList.toggle("active",e===i),a.appendChild(s),a.appendChild(r),a.appendChild(d),t.appendChild(a)},y=(t,e)=>{const{list:n}=t;n.innerHTML="",e.timers.forEach(v(n,e.current.index))},w=(t,e)=>{const{add:n,form:i,name:s,pause:r,reset:d,start:a}=t;switch(e.process){case c.idle:n.classList.remove("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),d.classList.add("hidden"),a.classList.add("hidden");break;case c.add:n.classList.add("hidden"),i.classList.remove("hidden"),r.classList.add("hidden"),d.classList.add("hidden"),a.classList.add("hidden"),s.focus();break;case c.ready:n.classList.remove("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),d.classList.add("hidden"),a.classList.remove("hidden"),i.reset();break;case c.countdown:n.classList.add("hidden"),i.classList.add("hidden"),d.classList.remove("hidden"),r.classList.remove("hidden"),a.classList.add("hidden");break;case c.pause:n.classList.add("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),d.classList.remove("hidden"),a.classList.remove("hidden");break}},I=(t,e)=>{g(t,e),w(t,e),y(t,e)},E=t=>{const[e,n]=t.split(":").map(Number);return e*m+n},x=t=>{const e=String(Math.floor(t/m)).padStart(2,"0"),n=String(t%m).padStart(2,"0");return`${e}:${n}`},b=async t=>{try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return console.error("Failed to fetch:",e),[]}},u=(t=500,e=1e3,n=2,i="triangle")=>{const s=new(window.AudioContext||window.webkitAudioContext),r=s.createOscillator(),d=s.createGain();r.connect(d),d.connect(s.destination),d.gain.value=n,r.frequency.value=e,r.type=i,r.start(s.currentTime),r.stop(s.currentTime+t/1e3)},p={add:document.getElementById("add"),form:document.getElementById("form"),list:document.getElementById("list"),name:document.getElementById("name"),pause:document.getElementById("pause"),reset:document.getElementById("reset"),start:document.getElementById("start"),timer:document.getElementById("timer")},l=t=>{Object.assign(o,t),I(p,o),localStorage.setItem("timers",JSON.stringify(o.timers))},h=()=>{clearInterval(o.intervalId),l({intervalId:null,current:{index:null,time:null},process:c.ready})},S=t=>{const e=new FormData(t.target),n=Object.fromEntries(e.entries()),i=[...o.timers,n];l({process:c.ready,timers:i})},C=t=>{const e=!t.target.classList.contains("remove"),n=o.process===c.countdown;if(e||n)return;const i=[...o.timers],s=t.target.dataset.index;i.splice(s,1),l({process:i.length>0?c.ready:c.idle,timers:i})},k=()=>l({process:c.add}),O=()=>{clearInterval(o.intervalId),l({intervalId:null,process:c.pause})},T=()=>h(),N=()=>{const t=o.current.index,e=t+1,n=o.timers.length-1===t,i=E(o.current.time)-1,s=x(i);if(l({current:{index:t,time:s}}),i>0&&i<=3&&u(30),i===0){if(n){h();return}u(),l({current:{index:e,time:o.timers[e].time}})}},B=()=>{const t=o.current.time?o.current:{index:0,time:o.timers[0].time};o.intervalId=setInterval(N,f),l({current:t,process:c.countdown})},P=()=>{const{form:t,list:e,add:n,pause:i,reset:s,start:r}=p;t.addEventListener("submit",S),e.addEventListener("click",C),n.addEventListener("click",k),i.addEventListener("click",O),s.addEventListener("click",T),r.addEventListener("click",B)},A=async()=>{const e=new URLSearchParams(window.location.search).get("url");let n=[];e?(n=await b(e),localStorage.setItem("timers",JSON.stringify(n))):n=JSON.parse(localStorage.getItem("timers"))||[],P(),l({process:n.length>0?c.ready:c.idle,timers:n})};document.addEventListener("DOMContentLoaded",A);
