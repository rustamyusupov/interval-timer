(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const L="00:00",f=1e3,m=60,c={idle:"idle",add:"add",ready:"ready",countdown:"countdown",pause:"pause"},d={audioCtx:null,intervalId:null,current:{index:null,time:null},process:c.idle,timers:[]},g=(e,t)=>{e.timer.textContent=t.current.time?t.current.time:L},v=(e,t)=>(n,s)=>{const r=document.createElement("button"),i=document.createElement("span"),o=document.createElement("span"),a=document.createElement("li");r.classList.add("remove"),r.setAttribute("type","button"),r.textContent="âœ–",r.dataset.index=s,i.classList.add("text","name"),i.textContent=n.name,o.classList.add("text","time"),o.textContent=n.time,a.classList.add("item"),a.classList.toggle("active",t===s),a.appendChild(r),a.appendChild(i),a.appendChild(o),e.appendChild(a)},y=(e,t)=>{const{list:n}=e;n.innerHTML="",t.timers.forEach(v(n,t.current.index))},w=(e,t)=>{const{add:n,form:s,name:r,pause:i,reset:o,start:a}=e;switch(t.process){case c.idle:n.classList.remove("hidden"),s.classList.add("hidden"),i.classList.add("hidden"),o.classList.add("hidden"),a.classList.add("hidden");break;case c.add:n.classList.add("hidden"),s.classList.remove("hidden"),i.classList.add("hidden"),o.classList.add("hidden"),a.classList.add("hidden"),r.focus();break;case c.ready:n.classList.remove("hidden"),s.classList.add("hidden"),i.classList.add("hidden"),o.classList.add("hidden"),a.classList.remove("hidden"),s.reset();break;case c.countdown:n.classList.add("hidden"),s.classList.add("hidden"),o.classList.remove("hidden"),i.classList.remove("hidden"),a.classList.add("hidden");break;case c.pause:n.classList.add("hidden"),s.classList.add("hidden"),i.classList.add("hidden"),o.classList.remove("hidden"),a.classList.remove("hidden");break}},I=(e,t)=>{g(e,t),w(e,t),y(e,t)},E=e=>{const[t,n]=e.split(":").map(Number);return t*m+n},x=e=>{const t=String(Math.floor(e/m)).padStart(2,"0"),n=String(e%m).padStart(2,"0");return`${t}:${n}`},C=async e=>{try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");return await t.json()}catch(t){return console.error("Failed to fetch:",t),[]}},u=({ctx:e,duration:t=100,frequency:n=1e3,volume:s=2,type:r="triangle"})=>{if(!e){console.warn("AudioContext is not provided");return}const i=e.createOscillator(),o=e.createGain();i.connect(o),o.connect(e.destination),o.gain.value=s,i.frequency.value=n,i.type=r,i.start(e.currentTime),i.stop(e.currentTime+t/1e3)},p={add:document.getElementById("add"),form:document.getElementById("form"),list:document.getElementById("list"),name:document.getElementById("name"),pause:document.getElementById("pause"),reset:document.getElementById("reset"),start:document.getElementById("start"),timer:document.getElementById("timer")},l=e=>{Object.assign(d,e),I(p,d),localStorage.setItem("timers",JSON.stringify(d.timers))},h=()=>{clearInterval(d.intervalId),l({intervalId:null,current:{index:null,time:null},process:c.ready})},b=e=>{const t=new FormData(e.target),n=Object.fromEntries(t.entries()),s=[...d.timers,n];l({process:c.ready,timers:s})},S=e=>{const t=!e.target.classList.contains("remove"),n=d.process===c.countdown;if(t||n)return;const s=[...d.timers],r=e.target.dataset.index;s.splice(r,1),l({process:s.length>0?c.ready:c.idle,timers:s})},k=()=>l({process:c.add}),O=()=>{clearInterval(d.intervalId),l({intervalId:null,process:c.pause})},T=()=>h(),N=()=>{const e=d.current.index,t=e+1,n=d.timers.length-1===e,s=E(d.current.time)-1,r=x(s);if(l({current:{index:e,time:r}}),s>0&&s<=3&&u({ctx:d.audioCtx}),s===0){if(n){h();return}u({ctx:d.audioCtx,duration:500}),l({current:{index:t,time:d.timers[t].time}})}},B=()=>{const e=d.current.time?d.current:{index:0,time:d.timers[0].time};d.intervalId=setInterval(N,f),l({current:e,process:c.countdown}),u({ctx:d.audioCtx,duration:250})},A=()=>{const{form:e,list:t,add:n,pause:s,reset:r,start:i}=p;e.addEventListener("submit",b),t.addEventListener("click",S),n.addEventListener("click",k),s.addEventListener("click",O),r.addEventListener("click",T),i.addEventListener("click",B)},P=async()=>{const e=new(window.AudioContext||window.webkitAudioContext),n=new URLSearchParams(window.location.search).get("url");let s=[];n?(s=await C(n),localStorage.setItem("timers",JSON.stringify(s))):s=JSON.parse(localStorage.getItem("timers"))||[],A(),l({audioCtx:e,process:s.length>0?c.ready:c.idle,timers:s})};document.addEventListener("DOMContentLoaded",P);
