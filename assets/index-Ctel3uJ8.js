(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerPolicy&&(d.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?d.credentials="include":n.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(n){if(n.ep)return;n.ep=!0;const d=s(n);fetch(n.href,d)}})();const h="00:00",L=1e3,u=60,c={idle:"idle",add:"add",ready:"ready",countdown:"countdown",pause:"pause"},i={intervalId:null,current:{index:null,time:null},process:c.idle,timers:[]},f=(t,e)=>{t.timer.textContent=e.current.time?e.current.time:h},g=t=>(e,s)=>{const r=document.createElement("button"),n=document.createElement("span"),d=document.createElement("span"),o=document.createElement("li");r.classList.add("remove"),r.setAttribute("type","button"),r.textContent="âœ–",r.dataset.index=s,n.classList.add("text","name"),n.textContent=e.name,d.classList.add("text","time"),d.textContent=e.time,o.classList.add("item"),o.appendChild(r),o.appendChild(n),o.appendChild(d),t.appendChild(o)},v=(t,e)=>{const{list:s}=t;s.innerHTML="",e.timers.forEach(g(s))},y=(t,e)=>{const{add:s,form:r,name:n,pause:d,reset:o,start:l}=t;switch(e.process){case c.idle:s.classList.remove("hidden"),r.classList.add("hidden"),d.classList.add("hidden"),o.classList.add("hidden"),l.classList.add("hidden");break;case c.add:s.classList.add("hidden"),r.classList.remove("hidden"),d.classList.add("hidden"),o.classList.add("hidden"),l.classList.add("hidden"),n.focus();break;case c.ready:s.classList.remove("hidden"),r.classList.add("hidden"),d.classList.add("hidden"),o.classList.add("hidden"),l.classList.remove("hidden"),r.reset();break;case c.countdown:s.classList.add("hidden"),r.classList.add("hidden"),o.classList.remove("hidden"),d.classList.remove("hidden"),l.classList.add("hidden");break;case c.pause:s.classList.add("hidden"),r.classList.add("hidden"),d.classList.add("hidden"),o.classList.remove("hidden"),l.classList.remove("hidden");break}},I=t=>{const[e,s]=t.split(":").map(Number);return e*u+s},E=t=>{const e=String(Math.floor(t/u)).padStart(2,"0"),s=String(t%u).padStart(2,"0");return`${e}:${s}`},b=async t=>{try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return console.error("Failed to fetch:",e),[]}},m={add:document.getElementById("add"),form:document.getElementById("form"),list:document.getElementById("list"),name:document.getElementById("name"),pause:document.getElementById("pause"),reset:document.getElementById("reset"),start:document.getElementById("start"),timer:document.getElementById("timer")},a=t=>{const e={...i},s=e.process===c.idle||t.process===c.ready,r=t.current&&t.current.time!==e.current.time,n=e.process===c.idle,d=t.timers&&t.timers.length!==e.timers.length,o=e.process!==t.process;Object.assign(i,t),(s||r)&&f(m,i),(n||d||o)&&(y(m,i),v(m,i)),localStorage.setItem("timers",JSON.stringify(i.timers))},p=()=>{clearInterval(i.intervalId),a({intervalId:null,current:{index:null,time:null},process:c.ready})},x=t=>{const e=new FormData(t.target),s=Object.fromEntries(e.entries()),r=[...i.timers,s];a({process:c.ready,timers:r})},C=t=>{const e=!t.target.classList.contains("remove"),s=i.process===c.countdown;if(e||s)return;const r=[...i.timers],n=t.target.dataset.index;r.splice(n,1),a({process:r.length>0?c.ready:c.idle,timers:r})},k=()=>a({process:c.add}),w=()=>{clearInterval(i.intervalId),a({intervalId:null,process:c.pause})},S=()=>p(),T=()=>{const t=i.current.index,e=t+1,s=i.timers.length-1===t,r=I(i.current.time)-1,n=E(r);if(a({current:{index:t,time:n}}),r===0){if(s){p();return}a({current:{index:e,time:i.timers[e].time}})}},O=()=>{const t=i.current.time?i.current:{index:0,time:i.timers[0].time};i.intervalId=setInterval(T,L),a({current:t,process:c.countdown})},N=()=>{const{form:t,list:e,add:s,pause:r,reset:n,start:d}=m;t.addEventListener("submit",x),e.addEventListener("click",C),s.addEventListener("click",k),r.addEventListener("click",w),n.addEventListener("click",S),d.addEventListener("click",O)},B=async()=>{const e=new URLSearchParams(window.location.search).get("url");let s=[];e?(s=await b(e),localStorage.setItem("timers",JSON.stringify(s))):s=JSON.parse(localStorage.getItem("timers"))||[],N(),a({process:s.length>0?c.ready:c.idle,timers:s})};document.addEventListener("DOMContentLoaded",B);
