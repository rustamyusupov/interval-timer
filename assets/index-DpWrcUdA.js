(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function d(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=d(n);fetch(n.href,i)}})();const L=1e3,u=60,o={idle:"idle",add:"add",ready:"ready",countdown:"countdown",pause:"pause"},c={intervalId:null,current:{index:null,time:null},process:o.idle,timers:[]},f=(e,t)=>{e.timer.textContent=t.current.time?t.current.time:"00:00"},g=e=>(t,d)=>{const s=document.createElement("button"),n=document.createElement("span"),i=document.createElement("span"),r=document.createElement("li");s.classList.add("remove"),s.setAttribute("type","button"),s.textContent="âœ–",s.dataset.index=d,n.classList.add("text","name"),n.textContent=t.name,i.classList.add("text","time"),i.textContent=t.time,r.classList.add("item"),r.appendChild(s),r.appendChild(n),r.appendChild(i),e.appendChild(r)},v=(e,t)=>{const{list:d}=e;if(d.innerHTML="",t.timers.length===0){const s=document.createElement("li");s.classList.add("text"),s.textContent="No timers",d.appendChild(s);return}t.timers.forEach(g(d))},y=(e,t)=>{const{add:d,form:s,name:n,pause:i,reset:r,start:l,timer:h}=e;switch(t.process){case o.idle:d.classList.remove("hidden"),s.classList.add("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),l.classList.add("hidden");break;case o.add:d.classList.add("hidden"),s.classList.remove("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),l.classList.add("hidden"),n.focus();break;case o.ready:d.classList.remove("hidden"),s.classList.add("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),l.classList.remove("hidden"),s.reset();break;case o.countdown:d.classList.add("hidden"),s.classList.add("hidden"),r.classList.remove("hidden"),i.classList.remove("hidden"),l.classList.add("hidden");break;case o.pause:d.classList.add("hidden"),s.classList.add("hidden"),i.classList.add("hidden"),r.classList.remove("hidden"),l.classList.remove("hidden");break}h.classList.toggle("hidden",t.timers.length===0)},I=e=>{const[t,d]=e.split(":").map(Number);return t*u+d},E=e=>{const t=String(Math.floor(e/u)).padStart(2,"0"),d=String(e%u).padStart(2,"0");return`${t}:${d}`},m={add:document.getElementById("add"),form:document.getElementById("form"),list:document.getElementById("list"),name:document.getElementById("name"),pause:document.getElementById("pause"),reset:document.getElementById("reset"),start:document.getElementById("start"),timer:document.getElementById("timer")},a=e=>{const t={...c},d=t.process===o.idle&&e.process===o.ready,s=e.current&&e.current.time!==t.current.time,n=t.process===o.idle,i=e.timers&&e.timers.length!==t.timers.length,r=t.process!==e.process;Object.assign(c,e),(d||s)&&f(m,c),(n||i||r)&&(y(m,c),v(m,c)),localStorage.setItem("timers",JSON.stringify(c.timers))},p=()=>{clearInterval(c.intervalId),a({intervalId:null,current:{index:null,time:null},process:o.ready})},x=e=>{const t=new FormData(e.target),d=Object.fromEntries(t.entries()),s=[...c.timers,d];a({process:o.ready,timers:s})},C=e=>{const t=!e.target.classList.contains("remove"),d=c.process===o.countdown;if(t||d)return;const s=[...c.timers],n=e.target.dataset.index;s.splice(n,1),a({process:s.length>0?o.ready:o.idle,timers:s})},b=()=>a({process:o.add}),T=()=>{clearInterval(c.intervalId),a({intervalId:null,process:o.pause})},O=()=>p(),k=()=>{const e=c.current.index,t=e+1,d=c.timers.length-1===e,s=I(c.current.time)-1,n=E(s);if(a({current:{index:e,time:n}}),s===0){if(d){p();return}a({current:{index:t,time:c.timers[t].time}})}},S=()=>{const e=c.current.time?c.current:{index:0,time:c.timers[0].time};c.intervalId=setInterval(k,L),a({current:e,process:o.countdown})},B=()=>{const{form:e,list:t,add:d,pause:s,reset:n,start:i}=m,r=JSON.parse(localStorage.getItem("timers"))||[];e.addEventListener("submit",x),t.addEventListener("click",C),d.addEventListener("click",b),s.addEventListener("click",T),n.addEventListener("click",O),i.addEventListener("click",S),a({process:r.length>0?o.ready:o.idle,timers:r})};document.addEventListener("DOMContentLoaded",B);
